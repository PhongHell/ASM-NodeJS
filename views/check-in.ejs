<%- include('./includes/head.ejs') %>
    <link rel="stylesheet" href="/css/product.css">
    <link rel="stylesheet" href="/css/forms.css">
    </head>

    <body>
        <%- include('./includes/navigation.ejs') %>
            <main>
                <div class="centered">
                    <h1>
                        Điểm danh
                    </h1>
                    <hr>
                    <div class="image">
                        <img src="<%= staff.image %>" alt="<%= staff.name %>">
                    </div>
                </div>

                <% if (noTimesheet==='true' ) { %>
                    <p class="centered"><i class="warning"> Không có thông tin thời gian biểu </i></p>
                    <% } else { %>
                        <p></p>
                        <% } %>

                            <% if (!isCheckedIn) { %>
                                <form class="product-form" action="/" method="POST">
                                    <div class="form-control centered">
                                        <label for="workplace"><b>ĐỊA ĐIỂM LÀM VIỆC </b></label>
                                        <select name="workplace" id="workplace">
                                            <option value="home">Nhà</option>
                                            <option value="company">Công ty</option>
                                            <option value="customer_company">Khách hàng</option>
                                        </select>
                                    </div>
                                    <div class="centered">
                                        <button class="btn" type="submit">Điểm danh</button>
                                    </div>
                                </form>
                                <% } else { %>
                                    <div class="container">
                                        <div>
                                            <p>Đang làm việc</p>
                                            <p>Bắt đầu: <%=checkin.start.getHours() %>:
                                                        <%= checkin.start.getMinutes()%>:
                                                        <%= checkin.start.getSeconds() %>,Ngày 
                                                        <%= checkin.start.toISOString().slice(0,10).split('-').reverse().join('-') %>
                                            </p>
                                            <p>Địa điểm: <%= checkin.workplace==='home' ? 'Nhà' :
                                                    checkin.workplace==='customer_company' ? 'Khách hàng' : 'Công ty' %>
                                            </p>
                                        </div>
                                    </div>
                                    <form class="product-form" action="/" method="POST">
                                        <input type="hidden" value="checkout" name="checkout">
                                        <div class="centered">
                                            <button class="btn" type="submit">Kết thúc</button>
                                        </div>
                                    </form>
                                    <% } %>

                                        <div class="space-div"></div>

                                        <form class="product-form" action="/dayoff" method="POST">
                                            <b class="form-title">Đăng ký ngày nghỉ</b>
                                            <p>
                                                <i>Số ngày nghỉ còn lại: <%= Math.round((staff.annualLeave/8) * 100) /
                                                        100 %>
                                                </i>
                                            </p>
                                            <div class="form-control">
                                                <label for="dayoff">
                                                    Ngày nghỉ: </label>
                                                <input type="date" name="dayoff" id="dayoff">
                                            </div>
                                            <div class="form-control">
                                                <label for="houroff">
                                                    Thời gian nghỉ (h) </label>
                                                <input type="number" name="houroff" id="houroff" max="8">
                                            </div>
                                            <div class="form-control">
                                                <label for="reason">
                                                    Lý do </label>
                                                <textarea name="reason" id="reason"></textarea>
                                            </div>
                                            <button class="btn" type="submit">Xin nghỉ</button>
                                        </form>

                                        <% if (notLeave==='true' ) { %>
                                            <p class="centered"><i class="warning"> Không đăng ký được vì số giờ nghỉ đã
                                                    quá 8 giờ </i></p>
                                            <% } else { %>
                                                <p></p>
                                                <% } %>

                                                    <% if (holiday==='true' ) { %>
                                                        <p class="centered"><i class="warning"> Không đăng ký được vào
                                                                ngày nghỉ </i></p>
                                                        <% } else { %>
                                                            <p></p>
                                                            <% } %>


                                                                <% if (overLeave==='true' ) { %>
                                                                    <p class="centered"><i class="warning"> Không đăng
                                                                            ký được vì quá số ngày nghỉ
                                                                            quy định </i></p>
                                                                    <% } else { %>
                                                                        <p></p>
                                                                        <% } %>
            </main>
            <%- include('./includes/end.ejs') %>